<!DOCTYPE html>
<html>
<head>
	<title>gregcurt.is - Android Dependency Injection</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href='http://fonts.googleapis.com/css?family=Roboto:400,300,100,700' rel='stylesheet' type='text/css'>
	<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
	<link href="css/main.css" rel="stylesheet">
</head>
<body>
	<div class="container shadow">
		<h1 style="margin: 0 0 10px 0">Android Dependency Injection</h1>
		<div class="muted date">February 13, 2013</div>
		<hr>
		<h2>The Problem</h2>
		<p>Unfortunately, dependency injection is notoriously difficult in Android due to the activity lifecycle. The Android OS manages the creation and destruction of all your activity objects.</p>
		<div style="text-align: center;">
			<img src="http://developer.android.com/images/training/basics/basic-lifecycle.png" alt="Android activity lifecycle">
		</div>
		<p>Why is this a problem? When building testable apps, we want to be able to inject dependencies into our activities. This allows us to swap out our production classes with testable mocks. However, we can't do this since we don't have control over the creation of our activities. This tends to promote a design involving heavy use of static singletons. Let's take a look at a concrete example.</p>
		
		<h3>Basic Activity Example</h3>
		<script src="https://gist.github.com/gcurtis/77cc8009009667b0ac7a.js"></script>
		
		<p>This makes sense at a first glance, but now say you want to test your activity. How do we do this without making real web service calls? A pure unit test is out of the question unless we do something tricky with reflection and writing bytecode at runtime. We can create an integration test that makes calls to our server, but those are slow, less reliable, and require a separate testing environment.</p>
		<hr>
		<div class="text-center">
			<small><a href="http://gregcurt.is">gregcurt.is</a></small>
		</div>
	</div>
	<script src="http://code.jquery.com/jquery.js"></script>
	<script src="js/bootstrap.min.js"></script>
</body>
</html>